(window.webpackJsonp=window.webpackJsonp||[]).push([[96],{540:function(e,t,a){"use strict";a.r(t);var s=a(1),o=Object(s.a)({},(function(){var e=this,t=e._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[t("h1",{attrs:{id:"running-the-server"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#running-the-server"}},[e._v("#")]),e._v(" Running the Server")]),e._v(" "),t("p",{attrs:{synopsis:""}},[e._v("Learn how to run and setup the JSON-RPC server on Evmos.")]),e._v(" "),t("div",{staticClass:"custom-block tip"},[t("p",[t("strong",[e._v("Important")]),e._v(": You cannot use all JSON RPC methods unless your node stores the entire copy of the blockchain locally. Do you need archives/snapshots of our networks? Go to "),t("a",{attrs:{href:"https://docs.evmos.org/validators/snapshots_archives.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("this section"),t("OutboundLink")],1),e._v(".")])]),e._v(" "),t("h2",{attrs:{id:"introduction"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#introduction"}},[e._v("#")]),e._v(" Introduction")]),e._v(" "),t("p",[e._v("JSON-RPC is provided on multiple transports. Evmos supports JSON-RPC over HTTP and WebSocket.")]),e._v(" "),t("h2",{attrs:{id:"requirements"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#requirements"}},[e._v("#")]),e._v(" Requirements")]),e._v(" "),t("p",[e._v("We recommend to use the server with minimum 8-core CPU and 64gb of RAM.\nYou must have ports 8545 and 8546 open on your firewall.")]),e._v(" "),t("h2",{attrs:{id:"enable-server"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#enable-server"}},[e._v("#")]),e._v(" Enable Server")]),e._v(" "),t("p",[e._v("To enable RPC server use the following flag (set to true by default).")]),e._v(" "),t("tm-code-block",{staticClass:"codeblock",attrs:{language:"bash",base64:"cW9tZCBzdGFydCAtLWpzb24tcnBjLmVuYWJsZQo="}}),e._v(" "),t("h2",{attrs:{id:"defining-namespaces"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#defining-namespaces"}},[e._v("#")]),e._v(" Defining Namespaces")]),e._v(" "),t("p",[t("code",[e._v("Eth")]),e._v(","),t("code",[e._v("Net")]),e._v(" and "),t("code",[e._v("Web3")]),e._v(" "),t("RouterLink",{attrs:{to:"/developers/json-rpc/namespaces.html"}},[e._v("namespaces")]),e._v(" are enabled by default, but for the JSON-RPC you need to add more namespaces.\nIn order to enable other namespaces edit "),t("code",[e._v("app.toml")]),e._v(" file.")],1),e._v(" "),t("tm-code-block",{staticClass:"codeblock",attrs:{language:"toml",base64:"IyBBUEkgZGVmaW5lcyBhIGxpc3Qgb2YgSlNPTi1SUEMgbmFtZXNwYWNlcyB0aGF0IHNob3VsZCBiZSBlbmFibGVkCiMgRXhhbXBsZTogJnF1b3Q7ZXRoLHR4cG9vbCxwZXJzb25hbCxuZXQsZGVidWcsd2ViMyZxdW90OwphcGkgPSAmcXVvdDtldGgsbmV0LHdlYjMsdHhwb29sLGRlYnVnLHBlcnNvbmFsJnF1b3Q7Cg=="}}),e._v(" "),t("h2",{attrs:{id:"set-a-gas-cap"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#set-a-gas-cap"}},[e._v("#")]),e._v(" Set a Gas Cap")]),e._v(" "),t("p",[t("code",[e._v("eth_call")]),e._v(" and "),t("code",[e._v("eth_estimateGas")]),e._v(" define a global gas cap over rpc for DoS protection. You can override the default gas cap value of 25,000,000 by passing a custom value in "),t("code",[e._v("app.toml")]),e._v(":")]),e._v(" "),t("tm-code-block",{staticClass:"codeblock",attrs:{language:"toml",base64:"IyBHYXNDYXAgc2V0cyBhIGNhcCBvbiBnYXMgdGhhdCBjYW4gYmUgdXNlZCBpbiBldGhfY2FsbC9lc3RpbWF0ZUdhcyAoMD1pbmZpbml0ZSkuIERlZmF1bHQ6IDI1LDAwMCwwMDAuCmdhcy1jYXAgPSAyNTAwMDAwMAo="}}),e._v(" "),t("h2",{attrs:{id:"cors"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#cors"}},[e._v("#")]),e._v(" CORS")]),e._v(" "),t("p",[e._v("If accessing the RPC from a browser, CORS will need to be enabled with the appropriate domain set. Otherwise, JavaScript calls are limit by the same-origin policy and requests will fail.")]),e._v(" "),t("p",[e._v("The CORS setting can be updated from the "),t("code",[e._v("app.toml")])]),e._v(" "),t("tm-code-block",{staticClass:"codeblock",attrs:{language:"toml",base64:"IyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIwojIyMgICAgICAgICAgICAgICAgICAgICAgICAgICBBUEkgQ29uZmlndXJhdGlvbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIyMjCiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMKClthcGldCgojIC4uLgoKIyBFbmFibGVVbnNhZmVDT1JTIGRlZmluZXMgaWYgQ09SUyBzaG91bGQgYmUgZW5hYmxlZCAodW5zYWZlIC0gdXNlIGl0IGF0IHlvdXIgb3duIHJpc2spLgplbmFibGVkLXVuc2FmZS1jb3JzID0gdHJ1ZSAjIGRlZmF1bHQgZmFsc2UK"}}),e._v(" "),t("h2",{attrs:{id:"pruning"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#pruning"}},[e._v("#")]),e._v(" Pruning")]),e._v(" "),t("p",[e._v("For all methods to work correctly, your node must be archival (store the entire copy of the blockchain locally). Pruning must be disabled.\nThe pruning settings can be updated from the "),t("code",[e._v("app.toml")])]),e._v(" "),t("tm-code-block",{staticClass:"codeblock",attrs:{language:"toml",base64:"IyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIwojIyMgICAgICAgICAgICAgICAgICAgICAgICAgICBCYXNlIENvbmZpZ3VyYXRpb24gICAgICAgICAgICAgICAgICAgICAgICAgICAgIyMjCiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMKCiMgVGhlIG1pbmltdW0gZ2FzIHByaWNlcyBhIHZhbGlkYXRvciBpcyB3aWxsaW5nIHRvIGFjY2VwdCBmb3IgcHJvY2Vzc2luZyBhCiMgdHJhbnNhY3Rpb24uIEEgdHJhbnNhY3Rpb24ncyBmZWVzIG11c3QgbWVldCB0aGUgbWluaW11bSBvZiBhbnkgZGVub21pbmF0aW9uCiMgc3BlY2lmaWVkIGluIHRoaXMgY29uZmlnIChlLmcuIDAuMjV0b2tlbjE7MC4wMDAxdG9rZW4yKS4KCiMgLi4uCgojIGRlZmF1bHQ6IHRoZSBsYXN0IDEwMCBzdGF0ZXMgYXJlIGtlcHQgaW4gYWRkaXRpb24gdG8gZXZlcnkgNTAwdGggc3RhdGU7IHBydW5pbmcgYXQgMTAgYmxvY2sgaW50ZXJ2YWxzCiMgbm90aGluZzogYWxsIGhpc3RvcmljIHN0YXRlcyB3aWxsIGJlIHNhdmVkLCBub3RoaW5nIHdpbGwgYmUgZGVsZXRlZCAoaS5lLiBhcmNoaXZpbmcgbm9kZSkKIyBldmVyeXRoaW5nOiBhbGwgc2F2ZWQgc3RhdGVzIHdpbGwgYmUgZGVsZXRlZCwgc3RvcmluZyBvbmx5IHRoZSBjdXJyZW50IHN0YXRlOyBwcnVuaW5nIGF0IDEwIGJsb2NrIGludGVydmFscwojIGN1c3RvbTogYWxsb3cgcHJ1bmluZyBvcHRpb25zIHRvIGJlIG1hbnVhbGx5IHNwZWNpZmllZCB0aHJvdWdoICdwcnVuaW5nLWtlZXAtcmVjZW50JywgJ3BydW5pbmcta2VlcC1ldmVyeScsICZndDsKcHJ1bmluZyA9ICZxdW90O25vdGhpbmcmcXVvdDsKcHJ1bmluZy1rZWVwLXJlY2VudCA9ICZxdW90OzAmcXVvdDsKcHJ1bmluZy1rZWVwLWV2ZXJ5ID0gJnF1b3Q7MCZxdW90OwpwcnVuaW5nLWludGVydmFsID0gJnF1b3Q7MCZxdW90Owo="}}),e._v(" "),t("h2",{attrs:{id:"websocket-server"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#websocket-server"}},[e._v("#")]),e._v(" WebSocket Server")]),e._v(" "),t("p",[e._v("Websocket is a bidirectional transport protocol. A Websocket connection is maintained by client and server until it is explicitly terminated by one. Most modern browsers support Websocket which means it has good tooling.")]),e._v(" "),t("p",[e._v("Because Websocket is bidirectional, servers can push events to clients. That makes Websocket a good choice for use-cases involving event subscription.\nAnother benefit of Websocket is that after the handshake procedure, the overhead of individual messages is low, making it good for sending high number of requests.\nThe WebSocket Server can be enabled from the "),t("code",[e._v("app.toml")])]),e._v(" "),t("tm-code-block",{staticClass:"codeblock",attrs:{language:"toml",base64:"IyBBZGRyZXNzIGRlZmluZXMgdGhlIEVWTSBXZWJTb2NrZXQgc2VydmVyIGFkZHJlc3MgdG8gYmluZCB0by4Kd3MtYWRkcmVzcyA9ICZxdW90OzAuMC4wLjA6ODU0NiZxdW90Owo="}}),e._v(" "),t("h2",{attrs:{id:"eth-tx-indexer"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#eth-tx-indexer"}},[e._v("#")]),e._v(" ETH Tx Indexer")]),e._v(" "),t("p",[e._v("The ETH Tx Indexer provides an optional indexer services for Ethereum transactions to optimize JSON RPC performance. This removes the need for Tendermint Tx Indexer to support RPCs which reduces considerably storage costs.")]),e._v(" "),t("h3",{attrs:{id:"enable-indexer"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#enable-indexer"}},[e._v("#")]),e._v(" Enable Indexer")]),e._v(" "),t("p",[e._v("To enable the ETH Indexer run the following command")]),e._v(" "),t("tm-code-block",{staticClass:"codeblock",attrs:{language:"bash",base64:"cW9tZCBzdGFydCAtLWpzb24tcnBjLmVuYWJsZS1pbmRleGVyIAo="}}),e._v(" "),t("h3",{attrs:{id:"index-historical-transactions"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#index-historical-transactions"}},[e._v("#")]),e._v(" Index Historical Transactions")]),e._v(" "),t("p",[e._v("If the chain had already started and you need the ETH Indexer to catch up on old transactions, you could run the "),t("code",[e._v("index-eth-tx")]),e._v(" command to index historical ETH transactions.")]),e._v(" "),t("tm-code-block",{staticClass:"codeblock",attrs:{language:"bash",base64:"cW9tZCBpbmRleC1ldGgtdHggYmFja3dhcmQK"}}),e._v(" "),t("p",[e._v("After the eth indexer has finished catching up, the Tendermint indexer can be disabled for JSON RPC support.")]),e._v(" "),t("p",[e._v("If you need to index transactions from the last indexed block to the top of the chain, you can run")]),e._v(" "),t("tm-code-block",{staticClass:"codeblock",attrs:{language:"bash",base64:"cW9tZCBpbmRleC1ldGgtdHggZm9yd2FyZAo="}}),e._v(" "),t("h3",{attrs:{id:"eth-tx-indexer-and-state-sync"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#eth-tx-indexer-and-state-sync"}},[e._v("#")]),e._v(" Eth Tx Indexer and State sync")]),e._v(" "),t("p",[e._v("If setting up a node with state sync, you need to first start the node and index at least one block before turning on the eth tx indexer.")])],1)}),[],!1,null,null,null);t.default=o.exports}}]);