(window.webpackJsonp=window.webpackJsonp||[]).push([[176],{626:function(e,n,t){"use strict";t.r(n);var o=t(1),a=Object(o.a)({},(function(){var e=this,n=e._self._c;return n("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[n("h1",{attrs:{id:"understanding-active-channels"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#understanding-active-channels"}},[e._v("#")]),e._v(" Understanding Active Channels")]),e._v(" "),n("p",[e._v("The Interchain Accounts module uses "),n("a",{attrs:{href:"https://github.com/cosmos/ibc/tree/master/spec/core/ics-004-channel-and-packet-semantics#ordering",target:"_blank",rel:"noopener noreferrer"}},[e._v("ORDERED channels"),n("OutboundLink")],1),e._v(" to maintain the order of transactions when sending packets from a controller to a host chain. A limitation when using ORDERED channels is that when a packet times out the channel will be closed.")]),e._v(" "),n("p",[e._v("In the case of a channel closing, a controller chain needs to be able to regain access to the interchain account registered on this channel. "),n("code",[e._v("Active Channels")]),e._v(" enable this functionality.")]),e._v(" "),n("p",[e._v("When an Interchain Account is registered using "),n("code",[e._v("MsgRegisterInterchainAccount")]),e._v(", a new channel is created on a particular port. During the "),n("code",[e._v("OnChanOpenAck")]),e._v(" and "),n("code",[e._v("OnChanOpenConfirm")]),e._v(" steps (on controller & host chain respectively) the "),n("code",[e._v("Active Channel")]),e._v(" for this interchain account is stored in state.")]),e._v(" "),n("p",[e._v("It is possible to create a new channel using the same controller chain portID if the previously set "),n("code",[e._v("Active Channel")]),e._v(" is now in a "),n("code",[e._v("CLOSED")]),e._v(" state. This channel creation can be initialized programatically by sending a new "),n("code",[e._v("MsgChannelOpenInit")]),e._v(" message like so:")]),e._v(" "),n("tm-code-block",{staticClass:"codeblock",attrs:{language:"go",base64:"bXNnIDo9IGNoYW5uZWx0eXBlcy5OZXdNc2dDaGFubmVsT3BlbkluaXQocG9ydElELCBzdHJpbmcodmVyc2lvbkJ5dGVzKSwgY2hhbm5lbHR5cGVzLk9SREVSRUQsIFtdc3RyaW5ne2Nvbm5lY3Rpb25JRH0sIGljYXR5cGVzLkhvc3RQb3J0SUQsIGF1dGh0eXBlcy5OZXdNb2R1bGVBZGRyZXNzKGljYXR5cGVzLk1vZHVsZU5hbWUpLlN0cmluZygpKQpoYW5kbGVyIDo9IGtlZXBlci5tc2dSb3V0ZXIuSGFuZGxlcihtc2cpCnJlcywgZXJyIDo9IGhhbmRsZXIoY3R4LCBtc2cpCmlmIGVyciAhPSBuaWwgewogIHJldHVybiBlcnIKfQo="}}),e._v(" "),n("p",[e._v("Alternatively, any relayer operator may initiate a new channel handshake for this interchain account once the previously set "),n("code",[e._v("Active Channel")]),e._v(" is in a "),n("code",[e._v("CLOSED")]),e._v(" state. This is done by initiating the channel handshake on the controller chain using the same portID associated with the interchain account in question.")]),e._v(" "),n("p",[e._v("It is important to note that once a channel has been opened for a given interchain account, new channels can not be opened for this account until the currently set "),n("code",[e._v("Active Channel")]),e._v(" is set to "),n("code",[e._v("CLOSED")]),e._v(".")]),e._v(" "),n("h2",{attrs:{id:"future-improvements"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#future-improvements"}},[e._v("#")]),e._v(" Future improvements")]),e._v(" "),n("p",[e._v("Future versions of the ICS-27 protocol and the Interchain Accounts module will likely use a new channel type that provides ordering of packets without the channel closing in the event of a packet timing out, thus removing the need for "),n("code",[e._v("Active Channels")]),e._v(" entirely.\nThe following is a list of issues which will provide the infrastructure to make this possible:")]),e._v(" "),n("ul",[n("li",[n("a",{attrs:{href:"https://github.com/cosmos/ibc-go/issues/1599",target:"_blank",rel:"noopener noreferrer"}},[e._v("IBC Channel Upgrades"),n("OutboundLink")],1)]),e._v(" "),n("li",[n("a",{attrs:{href:"https://github.com/cosmos/ibc-go/issues/1661",target:"_blank",rel:"noopener noreferrer"}},[e._v("Implement ORDERED_ALLOW_TIMEOUT logic in 04-channel"),n("OutboundLink")],1)]),e._v(" "),n("li",[n("a",{attrs:{href:"https://github.com/cosmos/ibc-go/issues/1662",target:"_blank",rel:"noopener noreferrer"}},[e._v("Add ORDERED_ALLOW_TIMEOUT as supported ordering in 03-connection"),n("OutboundLink")],1)]),e._v(" "),n("li",[n("a",{attrs:{href:"https://github.com/cosmos/ibc-go/issues/1663",target:"_blank",rel:"noopener noreferrer"}},[e._v("Allow ICA channels to be opened as ORDERED_ALLOW_TIMEOUT"),n("OutboundLink")],1)])])],1)}),[],!1,null,null,null);n.default=a.exports}}]);